# 第3章 程序的机器级表示
## 3.9 异质的数据结构
### 3.9.1 结构
1.  *rp.width = *(rp.width) != (*rp).width = rp->width
### 3.9.2 联合
```cpp
typedef enum { N_LEAF, N_INTERNAL } nodetype_t;
sizeof(nodetype_t)=4;
```

```cpp
double d;
unsigned long u = (unsigned long) d;// u是d的整数表示（不是仅仅通过改变解释方法完成转换） 

unsigned long double2bits(double d){// 结果和d有一样的位表示 
  union {
    double d;
    unsigned long u;
  }temp;
  temp.d=d;
  return temp.u;
}

//当d=0.0时，上述两种方法得到的u与d有着一样的位表示 
```

```cpp
// 字节顺序问题
double uu2double(unsigned word0, unsigned word1){
  // 小端法机器上word0为低位四字节，大端法机器上为高位四字节 
  union{
    double d;
    unsigned u[2];
  }temp;
  temp.u[0]=word0;
  temp.u[1]=word1;
  return temp.d;
}
```